{% extends "blog/base.html" %}
{%  load crispy_forms_tags %}
{% block content %}



<!--<script>-->
<!--$(document).ready(function() {-->

<!--var availableColleges = [-->
  <!--{% for clg in users %}-->
      <!--"{{clg}}",-->
  <!--{% endfor %}];-->
<!--$( "#title" ).autocomplete({-->
  <!--source: availableColleges,-->
<!--});-->
<!--});-->
<!--</script>-->




<script>
$.fn.insertAtCaret = function(text) {
    return this.each(function() {
        if (document.selection && this.tagName == 'TEXTAREA') {
            //IE textarea support
            this.focus();
            sel = document.selection.createRange();
            sel.text = text;
            this.focus();
        } else if (this.selectionStart || this.selectionStart == '0') {
            //MOZILLA/NETSCAPE support
            startPos = this.selectionStart;
            endPos = this.selectionEnd;
            scrollTop = this.scrollTop;
            this.value = this.value.substring(0, startPos) + text + this.value.substring(endPos, this.value.length);
            this.focus();
            this.selectionStart = startPos + text.length;
            this.selectionEnd = startPos + text.length;
            this.scrollTop = scrollTop;
        } else {
            // IE input[type=text] and other browsers
            this.value += text;
            this.focus();
            this.value = this.value;    // forces cursor to end
        }
    });
};



i = 0;
$(document).ready(function(){
var availableColleges = [
  {% for clg in users %}
      "{{clg}}",
  {% endfor %}];


  $( "#markieren" ).autocomplete({
    source: availableColleges,
    select: function( event , ui ) {
    var title =  $("#title")
     title.val(title.val() + "@" + ui.item.label + " ");
     $("<b>Hello World!</b>").appendTo("#span1");
    },
    close: function(el) {
        el.target.value = '';
    }
    });




var content = $("textarea[name=content]");

    <!--$("#").click(function(){-->
        <!--content.insertAtCaret("")-->
    <!--});-->


     $("#link").click(function(){
        content.insertAtCaret('<a href=""></a>')
    });

     $("#bold").click(function(){
        content.insertAtCaret("<b></b>")
    });

     $("#italic").click(function(){
        content.insertAtCaret("<i></i>")
    });

     $("#style").click(function(){
        content.insertAtCaret('style=""')
    });

    $("#center").click(function(){
        content.insertAtCaret("text-align: center;")
    });

     $("#table").click(function(){
        content.insertAtCaret('<table class="table table-striped">\n <thead class="thead">\n<tr>\n<th scope="col">1</th>\n<th scope="col">2</th>\n</tr> \n</thead> \n<tbody> \n<tr> \n<td>1</td>\n<td>2</td> \n</tr> \n</tbody> \n</table>')
        <!--content.insertAtCaret('\nhello')-->
    });

     $("#row").click(function(){
        content.insertAtCaret("<tr></tr>")
    });

     $("#col").click(function(){
        content.insertAtCaret("<td></td>")
    });

     $("#h1").click(function(){
        content.insertAtCaret("<h1></h1>")
    });

     $("#h2").click(function(){
        content.insertAtCaret("<h2></h2>")
    });

     $("#h3").click(function(){
        content.insertAtCaret("<h3></h3>")
    });

     $("#h4").click(function(){
        content.insertAtCaret("<h4></h4>")
    });

     $("#h5").click(function(){
        content.insertAtCaret("<h5></h5>")
    });
    $("#small").click(function(){
        content.insertAtCaret("<small></small>")
    });

    $("#p").click(function(){
        content.insertAtCaret("<p></p>")
    });
    $("#span").click(function(){
        content.insertAtCaret("<span></span>")
    });

    $("#ul").click(function(){
        content.insertAtCaret("<ul>\n\n</ul>")
    });

    $("#li").click(function(){
        content.insertAtCaret("<li></li>")
    });


    $("#text-muted").click(function(){
        content.insertAtCaret("class='text-muted'")
    });
    var vorschau = $("#content-vorschau")
    vorschau.html(content.val())

    <!--VIELLEICHT WICHTIG FUER SPAETER!!!-->
    content.click(function() {
        console.log(content.val());
        console.log(content.prop('selectionStart'));

    });



    content.keyup(function() {
        vorschau.html(content.val())
    });




   <!--var z =  select: function(event, ui) {-->
        <!--$("#markieren").val(ui.item.id)-->
    <!--};-->
   <!--console.log(z);-->

   <!--var title = $( "#title" );-->
   <!--title.val(title.val + z);-->




  <!--$("#title").keydown(function(event){-->
    <!--&lt;!&ndash;$("#keypresses").text(i += 1);&ndash;&gt;-->
    <!--var str = $("#title").val();-->
    <!--&lt;!&ndash;var n = str.length;&ndash;&gt;-->
    <!--&lt;!&ndash;document.getElementById("span2").innerHTML = str;&ndash;&gt;-->

  <!--if (event.which == 81) {-->
  <!--$("#title").val(-->
  <!--function(n,c){-->
     <!--console.log(n);-->
     <!--console.log(c);-->
  <!--});-->

  <!--var last = $("#title").last()-->
  <!--console.log(last);-->

    <!--$( "#title" ).autocomplete({-->
    <!--source: availableColleges,-->
    <!--});-->

    <!--$("#span1").html("Key: " + event.which);-->
    <!--}-->
   <!--});-->


});
</script>


<!--<script>-->
<!--i = 0;-->
<!--$(document).ready(function(){-->
  <!--$("#title").keypress(function(){-->
    <!--$("span").text(i += 1);-->
  <!--});-->
<!--});-->
<!--&lt;!&ndash;</script>&ndash;&gt;-->

<!--<script>-->
<!--i = 0;-->
<!--$(document).ready(function(){-->
<!--$("#title").keypress(function(e){-->
  <!--if(e.which == 68) {-->
    <!--$("span").text(i += 1);-->
    <!--}-->
  <!--});-->
<!--});-->
<!--</script>-->

<!--<script>-->
<!--$('#title').keypress(function(event) {-->
    <!--var availableColleges = [-->
      <!--{% for clg in users %}-->
          <!--"{{clg}}",-->
      <!--{% endfor %}];-->

      <!--if(event.which == 81) {-->
            <!--$('#title').autocomplete({-->
            <!--source: availableColleges,-->
            <!--});-->
       <!--}-->
<!--});-->
<!--</script>-->

<!--<script>-->
<!--function all() {-->

    <!--var availableColleges = [-->
      <!--{% for clg in users %}-->
          <!--"{{clg}}",-->
      <!--{% endfor %}];-->

    <!--$( "#title" ).autocomplete({-->
      <!--source: availableColleges,-->
    <!--});-->
<!--};-->

<!--$("#title").bind('keypress', '@', all);-->
<!--</script>-->

<!--<script>-->
<!--$(document).ready(function() {-->

<!--var availableColleges = [-->
  <!--{% for clg in users %}-->
      <!--"{{clg}}",-->
  <!--{% endfor %}];-->

    <!--$("#title").autocomplete(availableColleges, {-->
        <!--matchContains: true,-->
        <!--scroll: false,-->
        <!--hotkeymode:true,-->
        <!--formatResult: function(row) { return '<a class="custom" href="#" tabindex="-1" contenteditable="false">@' + row[0] + '</a> ';}-->
<!--});-->
<!--});-->
<!--</script>-->

<!--<script>-->
<!--$('#title').bind('keydown', '@', function() {-->
    <!--var availableColleges = [-->
  <!--{% for clg in users %}-->
      <!--"{{clg}}",-->
  <!--{% endfor %}];-->
<!--$( "#title" ).autocomplete({-->
  <!--source: availableColleges-->
<!--});-->
<!--});-->
<!--</script>-->


<!--<script>-->
    <!--$("#ce1").autocomplete(cities, {-->
        <!--matchContains: true,-->
        <!--scroll: false,-->
        <!--hotkeymode:true,-->
        <!--noresultsmsg: 'No matches, Do you want to create <a href="#">{q}</a>'-->
<!--})-->
<!--</script>-->

    <div class="content-section">


        <form method="POST">
            {%  csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Blog Post</legend>


    <div class="container">
                <div class="row">
                    <div class="col-sm-3">
                        <small>Markieren</small>
                        <input type="text" class="form-control" id="markieren" placeholder="Markiere Friends">

                    </div>
                    <div class="col-sm-9">
                        <small>Title</small>
                        <input class="form-control" type="text" id="title" name="title" required/>
                        <small class="text-muted">Bei den markierten Freunden immer ein Leerzeichen danach lassen</small>
                    </div>


                </div>
        </div>

                                {% if user.is_staff %}
                <div class="container">
                    <div class="row">
                        <div class="col-sm">
                            <span id="link" class="border border-dark rounded"> link </span>
                            <span id="bold" class="border border-dark rounded"><b> B </b></span>
                            <span id="italic" class="border border-dark rounded"><i> Italic </i></span><br>
                            <a href="https://www.w3schools.com/colors/colors_picker.asp" target="_blank">Color picker</a><br>
                            <a href="https://www.w3schools.com/cssref/default.asp" target="_blank">CSS Reference</a>
                        </div>


                        <div class="col-sm">
                            <div class="dropdown">
                                  <button class="btn btn-info dropdown-toggle" type="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Elements
                                  </button>
                                   <div class="dropdown-menu">
                                        <small class="dropdown-item" id="small">small</small>
                                       <small class="dropdown-item" id="p">p</small>
                                       <small class="dropdown-item" id="span">span</small>
                                       <small class="dropdown-item" id="h1">h1</small>
                                       <small class="dropdown-item" id="h2">h2</small>
                                       <small class="dropdown-item" id="h3">h3</small>
                                       <small class="dropdown-item" id="h4">h4</small>
                                       <small class="dropdown-item" id="h5">h5</small>

                                    </div>
                                </div>
                        </div>

                        <div class="col-sm">
                              <div class="dropdown">
                                  <button class="btn btn-warning dropdown-toggle" type="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Style
                                  </button>
                                   <div class="dropdown-menu">
                                       <small class="dropdown-item" id="style">Style Tag</small>
                                       <small class="dropdown-item" id="center">text center</small>
                                       <small class="dropdown-item" id="text-muted">text muted</small>
                                    </div>
                                </div>
                        </div>

                        <div class="col-sm">
                              <div class="dropdown">
                                  <button class="btn btn-success dropdown-toggle" type="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Tabelle
                                  </button>
                                   <div class="dropdown-menu">
                                       <small class="dropdown-item" id="ul">ul</small>
                                       <small class="dropdown-item" id="li">li</small>
                                       <small class="dropdown-item" id="table">Tabelle</small>
                                       <small class="dropdown-item" id="row">row</small>
                                       <small class="dropdown-item" id="col">column</small>

                                    </div>
                                </div>
                        </div>

                    </div>
                </div>
                {%endif%}

                {{  content_form|crispy }}
            </fieldset>
            <div class="form-group">
                <button class="btn btn-outline-info" type="submit">Post</button>

            </div>
        </form>

        {%if user.is_staff%}
    <h2>Vorschau</h2>
    <div id="content-vorschau"></div>
    {%endif%}
    </div>


{% endblock content %}